(this.webpackJsonpav01=this.webpackJsonpav01||[]).push([[0],{36:function(e,a,t){e.exports=t.p+"static/media/bt_close.9cd3551b.svg"},37:function(e,a,t){e.exports=t.p+"static/media/Ic_chevron_right_48px.ddf06c40.svg"},40:function(e,a,t){e.exports=t(64)},45:function(e,a,t){},47:function(e,a,t){},52:function(e,a,t){},53:function(e,a,t){},54:function(e,a,t){},59:function(e,a,t){},60:function(e,a,t){},61:function(e,a,t){},64:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(19),c=t.n(l),s=(t(45),t(9)),m=t(15),u=t.n(m),i=t(20),o=t(11),d=Object(n.createContext)(null),f=t(3),E=function(){var e=Object(i.a)(u.a.mark((function e(a){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(window.location.href.indexOf("localhost"),"http://ducknest.co.uk/doncaster/av01/"),e.next=3,fetch("".concat(t,"/?rest_route=/wp/v2/").concat(a));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),p=t(17),_=function(e){var a=[];return e.forEach((function(e){a.push(Object(p.a)({id:e.id},e.acf))})),a},h=function(e){var a=e.acf.memorial_name,t=[];return a.forEach((function(e,a){e.featured_story&&t.push(e)})),t},v=function(e){var a=[];return e.acf.memorial_name.forEach((function(e){var t=e.firstname.match(/\b(\w)/g);e.initials=t.join(" "),a.push(e)})),a},b=function(e){var a=[];return e.forEach((function(e){a.push({id:e.id,images:e.acf.medal_image})})),a};var g=function(e,a){switch(a.type){case"DATA_NAMES":return Object(p.a)({},e,{names:v(a.data),featuredNames:h(a.data)});case"DATA_MEDALS":return Object(p.a)({},e,{medals:b(a.data)});case"DATA_FEATURED":return Object(p.a)({},e,{featured:_(a.data)});default:return e}},N=t(6),O=function(e){return Object(n.useEffect)((function(){N.a.killTweensOf(".page"),N.a.to(".page",{duration:.5,alpha:1})}),[]),r.a.createElement("div",{className:"".concat(e.class," page")},e.children)},j=(t(47),function(){Object(f.f)();var e=Object(n.useContext)(d);e.state,e.dispatch;return r.a.createElement(O,null,r.a.createElement("h1",null,"Home"),r.a.createElement(s.b,{to:"/memorialboard"},"Memorial Board"))}),y=(t(52),function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__bg"}),r.a.createElement("div",{className:"header__home"}),r.a.createElement(s.b,{to:"/names"},"Names"),r.a.createElement(s.b,{to:"/stories"},"Stories"))}),k=(t(53),function(){var e=Object(f.f)();return r.a.createElement(O,{class:"names"},r.a.createElement("div",{className:"names__panel"},r.a.createElement("div",{className:"names__button",onClick:function(){e.push("/memorial")}},"MEMORIAL BOARD")),r.a.createElement("div",{className:"names__panel"},r.a.createElement("div",{className:"names__button",onClick:function(){e.push("/featuredstories")}},"FEATURED STORIES")))}),x=(t(54),t(14)),A=t(1),F=t(21),w=t(36),D=t.n(w),R=Object(n.memo)((function(e){var a=Object(f.f)(),t=Object(n.useContext)(d),l=t.state,c=(t.dispatch,Object(n.useState)(null)),s=Object(o.a)(c,2),m=s[0],u=s[1],i=Object(n.useRef)(!0),E=Object(n.useRef)(!0),p=Object(n.useRef)(),_=Object(n.useRef)(),h=Object(n.useRef)(),v=Object(n.useState)([]),b=Object(o.a)(v,2),g=b[0],j=b[1],y=Object(n.useState)(),k=Object(o.a)(y,2),w=k[0],R=k[1];Object(n.useEffect)((function(){i.current?i.current=!1:j(l.names)}),[l.names]),Object(n.useEffect)((function(){i.current?i.current=!1:(j(l.names),S())}),[]),Object(n.useEffect)((function(){E.current?E.current=!1:S()}),[l.featured]);var S=function(){setTimeout((function(){N.a.to(".results",{duration:.3,alpha:1})}),60)},C=Object(n.memo)((function(e){return r.a.createElement("div",{className:"memorial-letters__letter ".concat(m===e.i?"memorial-letters__letter--active":""),onClick:function(){return function(e,a){if(m===a)return u(null),j(l.names),void S();u(a);var t=l.names.filter((function(a){return a.surname.substring(0,1)===e}));console.log("newnames",t),j(t),setTimeout((function(){N.a.to(".results",{duration:.3,alpha:1})}),60)}(e.e,e.i)}},e.e)})),T=Object(n.memo)((function(e){return["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"].map((function(e,a){return r.a.createElement(C,{e:e,i:a,key:a})}))})),M=function(e){R(e)};Object(n.useEffect)((function(){w&&L()}),[w]);var I=function(){return r.a.createElement(x.a,{id:"RSC-Example",style:{width:"770px",height:"800px",inverted:!1}},r.a.createElement("div",{className:"results",ref:p},g&&g.length?g.map((function(e,t){return r.a.createElement("div",{key:t,className:"results__result ".concat(e.featured_story?"results__result--featured":""),onClick:function(){var t;t=e,console.log("",t),t.featured_story?(console.log("showing featured"),a.push("story/".concat(t.featured_story.ID))):M(t)}},r.a.createElement("span",null,e.surname),", ",e.initials)})):r.a.createElement("div",null,"No results")))},B=Object(n.memo)((function(e){return r.a.createElement("div",{className:"imageoverlay",ref:_},r.a.createElement("div",{className:"imageoverlay__container",ref:h},r.a.createElement("div",{className:"imageoverlay__close",onClick:q},r.a.createElement(F.a,{src:D.a,onClick:q})),r.a.createElement("div",{className:"imageoverlay__image"},r.a.createElement("div",{className:"popup__left"},r.a.createElement("h1",null,w&&w.firstname," ",w&&w.surname),w&&w.rank?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Rank: "),w.rank):r.a.createElement(r.a.Fragment,null),w&&w.date_of_death?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Date of death: "),w.date_of_death):r.a.createElement(r.a.Fragment,null),w&&w.buried_memorialised?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Buried/memorialised: "),w.buried_memorialised):r.a.createElement(r.a.Fragment,null),w&&w.next_of_kin?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Next of kin: "),w.next_of_kin):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"popup__right"},w&&w.photo?r.a.createElement("img",{src:w.photo.sizes.medium}):r.a.createElement(r.a.Fragment,null)))))})),L=function(){N.a.set(_.current,{alpha:0}),N.a.to(_.current,{duration:.2,alpha:1}),N.a.set(h.current,{alpha:0,scale:.95}),N.a.to(h.current,{duration:.4,scale:1,alpha:1,delay:.1,ease:A.a.easeOut}),_.current.style.display="flex"},q=function(){R(null),_.current.style.display="none",S()};return r.a.createElement(O,{class:"memorial"},r.a.createElement(B,null),r.a.createElement("div",{className:"memorial__left"},r.a.createElement("div",{className:"memorial-letters"},r.a.createElement("h1",null,"Memorial board"),r.a.createElement("h2",null,"Full list of names"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis ac nisl lacus. Sed a consequat velit, et scelerisque lacus. Maecenas vitae porttitor leo."),r.a.createElement("div",{className:"memorial-letters__letters"},r.a.createElement(T,null)))),r.a.createElement("div",{className:"memorial__right"},r.a.createElement(I,null)))})),S=(t(59),t(37)),C=t.n(S),T=Object(n.memo)((function(e){var a=Object(f.f)(),t=Object(n.useContext)(d),l=t.state,c=(t.dispatch,function(){return r.a.createElement(x.a,{id:"RSC-Example",style:{width:"1138px",height:"800px",inverted:!1}},r.a.createElement("div",{className:"featured_results"},l.featuredNames&&l.featuredNames.length?l.featuredNames.map((function(e,t){return r.a.createElement("div",{key:t,className:"featured_result",onClick:function(){var t;t=e.featured_story.ID,a.push("story/".concat(t))}},r.a.createElement("div",{className:"featured_result__image"},e.photo?r.a.createElement("img",{src:e.photo.sizes.medium_large}):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"featured_result__copy"},r.a.createElement("div",{className:"featured_result__name"},e.firstname," ",e.surname),e.rank?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Rank: "),e.rank):r.a.createElement(r.a.Fragment,null),e.date_of_death?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Date of death: "),e.date_of_death):r.a.createElement(r.a.Fragment,null),e.buried_memorialised?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Buried/memorialised: "),e.buried_memorialised):r.a.createElement(r.a.Fragment,null),e.next_of_kin?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Next of kin: "),e.next_of_kin):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"featured_result__button"},"Find out more ",r.a.createElement(F.a,{src:C.a}))))})):r.a.createElement(r.a.Fragment,null)))});return r.a.createElement(O,{class:"featured"},r.a.createElement("div",{className:"featured__left"},"#",r.a.createElement("div",{className:"featured__copy"},r.a.createElement("h1",null,"Featured",r.a.createElement("br",null),"stories"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis ac nisl lacus. Sed a consequat velit, et scelerisque lacus. Maecenas vitae porttitor leo."))),r.a.createElement("div",{className:"featured__right"},r.a.createElement(c,null)))}));t(60),t(61);function M(e,a,t){return e.map((function(e){return e[a]})).indexOf(t)}var I=t(67),B=t(66),L=(t(62),t(63),t(38)),q=function(){var e=Object(n.useContext)(d).state,a=Object(f.g)().id,t=Object(n.useState)(),l=Object(o.a)(t,2),c=l[0],s=l[1],m=Object(n.useState)(),u=Object(o.a)(m,2),i=u[0],E=u[1],p=Object(n.useState)(),_=Object(o.a)(p,2),h=_[0],v=_[1];Object(n.useEffect)((function(){if(e.featured){var t=M(e.featured,"id",parseInt(a));s(e.featured[t]);var n=e.featured[t].id;e.names.forEach((function(e){e.featured_story.ID===n&&E(e)}));var r=e.featured[t].medals,l=[];r.forEach((function(a){var t=M(e.medals,"id",parseInt(a.ID));e.medals[t].images&&l.push(e.medals[t].images)})),v(l)}}),[e.featured,a]);return r.a.createElement(O,{class:"story"},c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"story__left"},r.a.createElement("h1",null,"Featured stories"),r.a.createElement("div",{className:"featured_result__image"})),r.a.createElement("div",{className:"story__mid"},i&&i.firstname?r.a.createElement("h2",null,i&&i.firstname," ",i&&i.surname):r.a.createElement(r.a.Fragment,null),r.a.createElement(x.a,{id:"RSC-Example",style:{width:"700px",height:"80%",inverted:!1}},r.a.createElement("div",{className:"story__copy"},r.a.createElement("div",{className:"relatedperson"},i&&i.rank?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Rank: "),i.rank):r.a.createElement(r.a.Fragment,null),i&&i.date_of_death?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Date of death: "),i.date_of_death):r.a.createElement(r.a.Fragment,null),i&&i.buried_memorialised?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Buried/memorialised: "),i.buried_memorialised):r.a.createElement(r.a.Fragment,null),i&&i.next_of_kin?r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Next of kin: "),i.next_of_kin):r.a.createElement(r.a.Fragment,null)),c&&c.personal_info?r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{content:c.personal_info}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement(r.a.Fragment,null)))),r.a.createElement("div",{className:"story__right"},r.a.createElement("div",{className:"image_select"},r.a.createElement("div",{onClick:function(){N.a.set(".images__objects",{autoAlpha:0}),N.a.set(".images__medal",{autoAlpha:1})}},"medals")," | ",r.a.createElement("div",{onClick:function(){N.a.set(".images__objects",{autoAlpha:1}),N.a.set(".images__medal",{autoAlpha:0})}},"objects")),r.a.createElement("div",{className:"images"},r.a.createElement("div",{className:"images__medal"},h&&h.length?h.map((function(e,a){return r.a.createElement("img",{key:a,src:e})})):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"images__objects"},r.a.createElement(I.a,{spaceBetween:50,slidesPerView:1,navigation:!0,pagination:{clickable:!0}},c.other_objects&&c.other_objects.map((function(e,a){return r.a.createElement(B.a,{key:a},r.a.createElement("img",{src:e.sizes.medium,alt:""}))}))))))):r.a.createElement(r.a.Fragment,null))};var U=function(){var e=Object(n.useReducer)(g,{}),a=Object(o.a)(e,2),t=a[0],l=a[1],c=Object(n.useMemo)((function(){return{state:t,dispatch:l}}),[t,l]);return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(u.a.mark((function e(){var a,t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("pages/73&_embed&per_page=1000");case 2:return a=e.sent,l({type:"DATA_NAMES",data:a}),e.next=6,E("medal");case 6:return t=e.sent,console.log("",t),l({type:"DATA_MEDALS",data:t}),e.next=11,E("featured_story");case 11:n=e.sent,l({type:"DATA_FEATURED",data:n});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(){l({type:"DATA_LOADED"})}))}),[]),r.a.createElement("div",{className:"layout"},r.a.createElement(y,null),r.a.createElement(d.Provider,{value:c},r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/",component:j,exact:!0}),r.a.createElement(f.a,{path:"/app.html",component:j,exact:!0}),r.a.createElement(f.a,{path:"/names",component:k,exact:!0}),r.a.createElement(f.a,{path:"/featuredstories",component:T,exact:!0}),r.a.createElement(f.a,{path:"/memorial",component:R,exact:!0}),r.a.createElement(f.a,{path:"/story/:id",component:q}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(s.a,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.9e60f278.chunk.js.map